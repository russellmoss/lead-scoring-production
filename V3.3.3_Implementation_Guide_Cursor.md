# V3.3.3 Implementation Guide: T1B_PRIME + T1G_ENHANCED Tiers

## Cursor.ai Step-by-Step Implementation

**Version:** V3.3.3_01012026_ZERO_FRICTION_SWEET_SPOT  
**Date:** January 2026  
**Purpose:** Add T1B_PRIME (Zero Friction Bleeder) and upgrade T1G to T1G_ENHANCED (Sweet Spot)

---

## Executive Summary

### What We're Implementing

| Tier | Definition | Conversion | Lift | Leads | Action |
|------|------------|------------|------|-------|--------|
| **T1B_PRIME** ⭐ | S65 + Custodian + Small + Bleeding (no CFP) | **13.64%** | **3.57x** | 22 | **NEW** |
| **T1G_ENHANCED** ⭐ | Growth Stage + $500K-$2M AUM | **9.09%** | **2.38x** | 66 | **UPGRADE** |

### Why This Matters

**T1B_PRIME Discovery:**
We found that the "Zero Friction" triple combo (Series 65 + Portable Custodian + Small Firm) combined with bleeding firms creates the **highest-converting segment ever identified** (13.64%).

**T1G_ENHANCED Refinement:**
By refining the AUM threshold from $250K+ to $500K-$2M, we improve T1G conversion by **79%** (9.09% vs 5.08% for leads outside this range).

### Validation Results (All Passed ✅)

| Check | Result | Status |
|-------|--------|--------|
| T1B_PRIME unique leads (no CFP) | 22 leads, 13.64% | ✅ PASS |
| T1B_PRIME overlap with T1A | 1 lead only | ✅ PASS |
| T1G_ENHANCED is subset of T1G | Confirmed | ✅ PASS |
| T1G_ENHANCED outperforms T1G | 9.09% vs 5.08% | ✅ PASS |

---

## Updated Tier Hierarchy (V3.3.3)

| Priority | Tier | Definition | Conv Rate | Lift | Change |
|----------|------|------------|-----------|------|--------|
| **1** | **T1B_PRIME** ⭐ | S65 + Custodian + Small + Bleeding (no CFP) | **13.64%** | **3.57x** | **NEW** |
| 2 | T1A | CFP + Bleeding | 10.00% | 2.62x | - |
| **3** | **T1G_ENHANCED** ⭐ | Growth Stage + $500K-$2M + Stable | **9.09%** | **2.38x** | **UPGRADED** |
| 4 | T1B | S65 + Bleeding (remainder) | 5.49% | 1.44x | - |
| 5 | T1F | HV Wealth + Bleeding | ~6% | ~1.6x | - |
| 6 | T1G_REMAINDER | Growth Stage + outside $500K-$2M | 5.08% | 1.33x | **NEW** |

**Key Changes:**
1. T1B_PRIME inserted at top (highest conversion)
2. T1G_ENHANCED checked before T1B (higher conversion: 9.09% vs 5.49%)
3. T1G split into T1G_ENHANCED ($500K-$2M) and T1G_REMAINDER (outside range)

---

## Pre-Implementation Checklist

Before starting, verify:
- [ ] BigQuery access configured
- [ ] MCP BigQuery connection working in Cursor.ai
- [ ] V3.3.2 changes already deployed (T1G tier exists)
- [ ] Backup of current `phase_4_v3_tiered_scoring.sql`
- [ ] Backup of current `January_2026_Lead_List_V3_V4_Hybrid.sql`

---

## STEP 1: Add Portable Custodian Flag

**Purpose:** T1B_PRIME requires `has_portable_custodian` flag.

### Cursor Prompt 1.1: Add Portable Custodian CTE

```
@workspace Add portable custodian flag to v3/sql/phase_4_v3_tiered_scoring.sql.

LOCATION: v3/sql/phase_4_v3_tiered_scoring.sql

TASK: Add a new CTE called `firm_custodian` after the `firm_account_size` CTE:

```sql
-- V3.3.3: Portable custodian flag for T1B_PRIME tier
-- Identifies firms using Schwab, Fidelity, or Pershing as custodian
-- These custodians enable "zero friction" transitions via Negative Consent
-- Source: V3.3.3 Matrix Effects Validation (January 2026)
firm_custodian AS (
    SELECT 
        CRD_ID as firm_crd,
        CUSTODIAN_PRIMARY_BUSINESS_NAME as custodian_name,
        CASE WHEN UPPER(CUSTODIAN_PRIMARY_BUSINESS_NAME) LIKE '%SCHWAB%' 
                  OR UPPER(CUSTODIAN_PRIMARY_BUSINESS_NAME) LIKE '%CHARLES%'
                  OR UPPER(CUSTODIAN_PRIMARY_BUSINESS_NAME) LIKE '%FIDELITY%'
                  OR UPPER(CUSTODIAN_PRIMARY_BUSINESS_NAME) LIKE '%PERSHING%'
             THEN 1 ELSE 0 
        END as has_portable_custodian
    FROM `savvy-gtm-analytics.FinTrx_data_CA.ria_firms_current`
),
```

Then add the join in the `leads_with_flags` CTE:
```sql
LEFT JOIN firm_custodian fc ON lf.firm_crd = fc.firm_crd
```

And add this field to the SELECT:
```sql
COALESCE(fc.has_portable_custodian, 0) as has_portable_custodian,
```

Log the changes made.
```

---

## STEP 2: Add T1B_PRIME Tier Logic

**Purpose:** Add the T1B_PRIME Zero Friction Bleeder tier.

### Cursor Prompt 2.1: Add T1B_PRIME to Tier Assignment

```
@workspace Add T1B_PRIME Zero Friction Bleeder tier to v3/sql/phase_4_v3_tiered_scoring.sql.

LOCATION: v3/sql/phase_4_v3_tiered_scoring.sql

CONTEXT:
T1B_PRIME is our HIGHEST converting tier (13.64%, 3.57x lift).
It captures "Zero Friction" transitions: advisors who can move seamlessly.

T1B_PRIME CRITERIA (all must be true):
- Series 65 Only (no Series 7) - Pure RIA, no broker-dealer ties
- Portable Custodian (Schwab/Fidelity/Pershing) - Same platform continuity
- Small Firm (≤10 reps) - No bureaucratic barriers
- Firm Bleeding (net_change ≤ -3) - Motivation to move
- NO CFP credential - CFP leads go to T1A instead (higher credential value)

EXPECTED PERFORMANCE:
- Conversion: 13.64%
- Lift: 3.57x baseline
- Sample: 22 leads

TASK: Find the CASE statement that assigns tiers.

Add T1B_PRIME as the FIRST tier check (highest priority):

```sql
-- ==========================================================================
-- TIER 1B_PRIME: ZERO FRICTION BLEEDER (Highest Converting Segment)
-- ==========================================================================
-- V3.3.3: NEW TIER - Our highest-converting segment ever found!
-- 
-- THEORY: "Zero Friction" transitions - when ALL barriers are removed:
-- - Series 65 Only = No BD lock-in (pure RIA)
-- - Portable Custodian = Same platform at new firm (Negative Consent paperwork)
-- - Small Firm = No bureaucratic exit barriers
-- - Bleeding Firm = Motivation to leave
--
-- CRITICAL: Leads with CFP credential go to T1A instead (CFP has higher value)
--
-- VALIDATION:
-- - Conversion: 13.64% (3.57x baseline)
-- - Sample: 22 leads
-- - Only 1 lead overlaps with T1A (has CFP) - minimal conflict
--
-- CRITERIA:
-- - Series 65 Only (no Series 7)
-- - Portable Custodian (Schwab/Fidelity/Pershing)
-- - Small Firm (≤10 reps)
-- - Firm Bleeding (net_change ≤ -3)
-- - NO CFP credential (CFP leads go to T1A)
-- ==========================================================================
WHEN has_series_65_only = 1                      -- Pure RIA (no BD)
     AND has_portable_custodian = 1              -- Schwab/Fidelity/Pershing
     AND firm_rep_count_at_contact <= 10         -- Small firm (no bureaucracy)
     AND firm_net_change_12mo <= -3              -- Bleeding firm (motivation)
     AND has_cfp = 0                             -- No CFP (CFP goes to T1A)
     AND is_wirehouse = 0                        -- Not at wirehouse
     AND is_excluded_title = 0                   -- Not excluded title
THEN 'TIER_1B_PRIME_ZERO_FRICTION'
```

IMPORTANT: T1B_PRIME must be checked FIRST, before T1A.
The order should be:
1. T1B_PRIME (Zero Friction Bleeder) ← NEW, FIRST
2. T1A (CFP + Bleeding)
3. T1G_ENHANCED (Growth Stage + Sweet Spot) ← UPGRADED
4. T1B (Series 65 + Bleeding)
5. T1G_REMAINDER (Growth Stage outside sweet spot) ← NEW
6. T1F, T2, T3, etc.

Log all changes made.
```

### Cursor Prompt 2.2: Ensure has_cfp Flag Exists

```
@workspace Verify that has_cfp flag exists in v3/sql/phase_4_v3_tiered_scoring.sql.

LOCATION: v3/sql/phase_4_v3_tiered_scoring.sql

TASK: Check if `has_cfp` is already calculated. If NOT, add it to the leads_with_flags CTE:

```sql
-- CFP credential detection (from bio and title, NOT from licenses)
CASE WHEN CONTACT_BIO LIKE '%CFP%' 
          OR CONTACT_BIO LIKE '%Certified Financial Planner%'
          OR TITLE_NAME LIKE '%CFP%'
     THEN 1 ELSE 0 
END as has_cfp,
```

Also verify `has_series_65_only` exists:
```sql
-- Series 65 Only (no Series 7 = pure RIA, no BD ties)
CASE WHEN REP_LICENSES LIKE '%Series 65%' 
          AND REP_LICENSES NOT LIKE '%Series 7%' 
     THEN 1 ELSE 0 
END as has_series_65_only,
```

Log what you find and any changes made.
```

---

## STEP 3: Upgrade T1G to T1G_ENHANCED

**Purpose:** Refine T1G AUM threshold from $250K+ to $500K-$2M sweet spot.

### Cursor Prompt 3.1: Update T1G to T1G_ENHANCED

```
@workspace Upgrade T1G to T1G_ENHANCED in v3/sql/phase_4_v3_tiered_scoring.sql.

LOCATION: v3/sql/phase_4_v3_tiered_scoring.sql

CONTEXT:
We discovered that the AUM "sweet spot" is $500K-$2M, not just $250K+.
- $500K-$2M: 9.09% conversion (2.38x lift)
- Outside range: 5.08% conversion (1.33x lift)

TASK: Find the existing T1G tier logic and REPLACE it with two tiers:

```sql
-- ==========================================================================
-- TIER 1G_ENHANCED: GROWTH STAGE + AUM SWEET SPOT (Proactive Movers)
-- ==========================================================================
-- V3.3.3: UPGRADED from T1G - Refined AUM range to $500K-$2M
-- 
-- THEORY: The "sweet spot" is $500K-$2M average account size:
-- - Big enough for client loyalty (not brand loyalty)
-- - Small enough to avoid institutional lock-in
--
-- VALIDATION:
-- - Conversion: 9.09% (2.38x baseline)
-- - Sample: 66 leads
-- - 79% improvement over leads outside this range
--
-- CRITERIA:
-- - Mid-career (5-15 years)
-- - AUM Sweet Spot ($500K-$2M avg account) ← REFINED
-- - Stable firm (net_change > -3)
-- ==========================================================================
WHEN industry_tenure_months BETWEEN 60 AND 180   -- Mid-career (5-15 years)
     AND avg_account_size BETWEEN 500000 AND 2000000  -- Sweet Spot ($500K-$2M)
     AND firm_net_change_12mo > -3               -- Stable firm (NOT bleeding)
     AND is_wirehouse = 0                        -- Not at wirehouse
     AND is_excluded_title = 0                   -- Not excluded title
THEN 'TIER_1G_ENHANCED_SWEET_SPOT'

-- ==========================================================================
-- TIER 1G_REMAINDER: GROWTH STAGE (Outside Sweet Spot)
-- ==========================================================================
-- V3.3.3: Catches Growth Stage leads outside the $500K-$2M sweet spot
-- Lower priority than T1G_ENHANCED but still above T2
--
-- VALIDATION:
-- - Conversion: 5.08% (1.33x baseline)
-- - Sample: 59 leads
-- ==========================================================================
WHEN industry_tenure_months BETWEEN 60 AND 180   -- Mid-career (5-15 years)
     AND avg_account_size >= 250000              -- Original threshold
     AND (avg_account_size < 500000 OR avg_account_size > 2000000)  -- Outside sweet spot
     AND firm_net_change_12mo > -3               -- Stable firm
     AND is_wirehouse = 0                        -- Not at wirehouse
     AND is_excluded_title = 0                   -- Not excluded title
THEN 'TIER_1G_GROWTH_STAGE'
```

IMPORTANT: T1G_ENHANCED should be checked BEFORE T1B (higher conversion: 9.09% vs 5.49%)

The updated order should be:
1. T1B_PRIME (13.64%)
2. T1A (10.00%)
3. T1G_ENHANCED (9.09%) ← Higher than T1B
4. T1B (5.49%)
5. T1G_REMAINDER (5.08%)
6. T1F, T2, T3...

Log all changes made.
```

---

## STEP 4: Add Expected Conversion Rates

**Purpose:** Set expected conversion rates for new tiers.

### Cursor Prompt 4.1: Add Tier Conversion Rates

```
@workspace Add expected conversion rates for V3.3.3 tiers.

LOCATION: v3/sql/phase_4_v3_tiered_scoring.sql

TASK: Find where expected_conversion_rate is assigned for each tier.

Add/update these rates:

```sql
-- V3.3.3 Tier Conversion Rates (ordered by performance)
WHEN score_tier = 'TIER_1B_PRIME_ZERO_FRICTION' THEN 0.1364   -- 13.64%
WHEN score_tier = 'TIER_1A_PRIME_MOVER_CFP' THEN 0.1000       -- 10.00%
WHEN score_tier = 'TIER_1G_ENHANCED_SWEET_SPOT' THEN 0.0909   -- 9.09%
WHEN score_tier = 'TIER_1B_PRIME_MOVER_SERIES65' THEN 0.0549  -- 5.49%
WHEN score_tier = 'TIER_1G_GROWTH_STAGE' THEN 0.0508          -- 5.08%
-- ... other tiers
```

Log the changes made.
```

---

## STEP 5: Add Score Narratives

**Purpose:** Add human-readable explanations for new tiers.

### Cursor Prompt 5.1: Add Tier Narratives

```
@workspace Add score narratives for V3.3.3 tiers.

LOCATION: v3/sql/phase_4_v3_tiered_scoring.sql

TASK: Find where score_narrative or v3_score_narrative is generated.

Add narratives for new tiers:

```sql
WHEN score_tier = 'TIER_1B_PRIME_ZERO_FRICTION' THEN
    CONCAT(
        first_name, ' is a ZERO FRICTION BLEEDER: ',
        'Pure RIA (Series 65 only) at small firm (', CAST(firm_rep_count_at_contact AS STRING), ' reps) ',
        'using portable custodian. Firm is bleeding (', CAST(firm_net_change_12mo AS STRING), ' net change). ',
        'All transition barriers removed - highest conversion segment.'
    )

WHEN score_tier = 'TIER_1G_ENHANCED_SWEET_SPOT' THEN
    CONCAT(
        first_name, ' is a SWEET SPOT GROWTH ADVISOR: ',
        'Mid-career (', CAST(ROUND(industry_tenure_months/12, 0) AS STRING), ' years) ',
        'with optimal client base ($', CAST(ROUND(avg_account_size/1000, 0) AS STRING), 'K avg account). ',
        'Firm is stable - proactive mover seeking platform upgrade.'
    )

WHEN score_tier = 'TIER_1G_GROWTH_STAGE' THEN
    CONCAT(
        first_name, ' is a GROWTH STAGE ADVISOR: ',
        'Mid-career (', CAST(ROUND(industry_tenure_months/12, 0) AS STRING), ' years) ',
        'with established practice at ', firm_name, '. ',
        'Firm is stable - strategic growth opportunity.'
    )
```

Log the changes made.
```

---

## STEP 6: Update January Lead List Generation

**Purpose:** Apply new tiers to monthly lead list.

### Cursor Prompt 6.1: Update Lead List SQL

```
@workspace Update pipeline/sql/January_2026_Lead_List_V3_V4_Hybrid.sql for V3.3.3.

LOCATION: pipeline/sql/January_2026_Lead_List_V3_V4_Hybrid.sql

TASKS:

1. Add firm_custodian CTE (same as Step 1):
```sql
firm_custodian AS (
    SELECT 
        CRD_ID as firm_crd,
        CASE WHEN UPPER(CUSTODIAN_PRIMARY_BUSINESS_NAME) LIKE '%SCHWAB%' 
                  OR UPPER(CUSTODIAN_PRIMARY_BUSINESS_NAME) LIKE '%CHARLES%'
                  OR UPPER(CUSTODIAN_PRIMARY_BUSINESS_NAME) LIKE '%FIDELITY%'
                  OR UPPER(CUSTODIAN_PRIMARY_BUSINESS_NAME) LIKE '%PERSHING%'
             THEN 1 ELSE 0 
        END as has_portable_custodian
    FROM `savvy-gtm-analytics.FinTrx_data_CA.ria_firms_current`
),
```

2. Add has_portable_custodian to leads CTE

3. Add has_cfp and has_series_65_only flags if not present

4. Add T1B_PRIME tier logic (FIRST in CASE statement)

5. Replace T1G with T1G_ENHANCED and T1G_REMAINDER

6. Update expected conversion rates

7. Update header comment to reference V3.3.3

Log all changes made.
```

---

## STEP 7: Update Model Registry

**Purpose:** Document the version change formally.

### Cursor Prompt 7.1: Update Model Registry

```
@workspace Update v3/models/model_registry_v3.json for V3.3.3.

LOCATION: v3/models/model_registry_v3.json

TASK: Update the following:

1. Change `model_version` to: "V3.3.3_01012026_ZERO_FRICTION_SWEET_SPOT"
2. Change `updated_date` to: "2026-01-01"
3. Add `changes_from_v3.3.2` array:

```json
"changes_from_v3.3.2": [
    "ADDED: TIER_1B_PRIME_ZERO_FRICTION - Zero Friction Bleeder (S65 + Custodian + Small + Bleeding)",
    "PERFORMANCE: 13.64% conversion (3.57x lift) - HIGHEST TIER EVER",
    "CRITERIA: Series 65 Only + Portable Custodian (Schwab/Fidelity/Pershing) + Small Firm (≤10) + Bleeding + No CFP",
    "UPGRADED: TIER_1G → TIER_1G_ENHANCED_SWEET_SPOT (refined AUM $500K-$2M)",
    "PERFORMANCE: 9.09% conversion (2.38x lift) - 79% improvement over original T1G",
    "ADDED: TIER_1G_GROWTH_STAGE for leads outside sweet spot (5.08% conversion)",
    "DISCOVERY: Matrix effects validation found true interaction effects (A×B > A + B)",
    "KEY INSIGHT: Platform friction signals work as a SYSTEM, not individually",
    "ANALYSIS: V3.3.3 Ultimate Matrix Analysis + Pre-Implementation Validation (January 2026)"
],
"tier_definitions": {
    "TIER_1B_PRIME_ZERO_FRICTION": {
        "description": "Zero Friction Bleeder - All transition barriers removed",
        "criteria": {
            "series_65_only": "true (no Series 7)",
            "has_portable_custodian": "Schwab, Fidelity, or Pershing",
            "firm_rep_count": "<= 10",
            "firm_net_change_12mo": "<= -3 (bleeding)",
            "has_cfp": "false (CFP leads go to T1A)"
        },
        "expected_conversion_rate": 0.1364,
        "expected_lift": 3.57,
        "sample_size_validated": 22,
        "added_version": "V3.3.3"
    },
    "TIER_1G_ENHANCED_SWEET_SPOT": {
        "description": "Growth Stage Advisor with optimal AUM sweet spot",
        "criteria": {
            "industry_tenure_months": "60-180 (5-15 years)",
            "avg_account_size": "500000-2000000 ($500K-$2M sweet spot)",
            "firm_net_change_12mo": "> -3 (stable, not bleeding)"
        },
        "expected_conversion_rate": 0.0909,
        "expected_lift": 2.38,
        "sample_size_validated": 66,
        "added_version": "V3.3.3",
        "replaces": "TIER_1G_GROWTH_STAGE_ADVISOR (V3.3.2)"
    }
}
```

Log the changes made.
```

---

## STEP 8: Update README.md

**Purpose:** Document the new tiers and analysis findings.

### Cursor Prompt 8.1: Update Root README

```
@workspace Update README.md at the root of the repository for V3.3.3.

LOCATION: README.md (root directory)

TASK: Add a new section after the V3.3.2 section:

---

## V3.3.3: Zero Friction + Sweet Spot Tiers (January 2026)

### Major Discoveries

The V3.3.3 Matrix Effects Analysis uncovered two breakthrough findings:

#### 1. T1B_PRIME: Zero Friction Bleeder (NEW HIGHEST TIER)

**The Discovery:** When ALL transition barriers are removed AND the firm is bleeding, conversion jumps to 13.64% - our highest-converting segment ever.

| Component | What It Does |
|-----------|--------------|
| Series 65 Only | No broker-dealer lock-in (pure RIA) |
| Portable Custodian | Same platform at new firm (Schwab/Fidelity/Pershing) |
| Small Firm (≤10) | No bureaucratic exit barriers |
| Bleeding Firm | Motivation to leave |

**Performance:**
| Metric | Value |
|--------|-------|
| Conversion Rate | **13.64%** |
| Lift vs Baseline | **3.57x** |
| Sample Size | 22 leads |

#### 2. T1G_ENHANCED: AUM Sweet Spot (UPGRADED)

**The Discovery:** The optimal AUM range is $500K-$2M, not just $250K+.

| AUM Range | Conversion | Lift |
|-----------|------------|------|
| **$500K-$2M (Sweet Spot)** | **9.09%** | **2.38x** |
| Outside Range | 5.08% | 1.33x |

**Why $500K-$2M Works:**
- Big enough for advisor loyalty (clients follow the advisor, not the brand)
- Small enough to avoid institutional lock-in

### Updated Tier Hierarchy

| Priority | Tier | Definition | Conv Rate | Lift |
|----------|------|------------|-----------|------|
| **1** | **T1B_PRIME** ⭐ | Zero Friction Bleeder | **13.64%** | **3.57x** |
| 2 | T1A | CFP + Bleeding | 10.00% | 2.62x |
| **3** | **T1G_ENHANCED** ⭐ | Growth Stage + $500K-$2M | **9.09%** | **2.38x** |
| 4 | T1B | S65 + Bleeding | 5.49% | 1.44x |
| 5 | T1G_REMAINDER | Growth Stage (outside sweet spot) | 5.08% | 1.33x |

### Key Insight: Matrix Effects Are Real

The V3.3.3 analysis proved that **true interaction effects exist**:

| Combination | Individual Sum | Combined | Effect |
|-------------|----------------|----------|--------|
| S65 + Custodian + Small + Bleeding | ~4.2x | **3.57x** | Multiplicative |
| Sweet Spot + Growth Stage | ~2.3x | **2.38x** | Multiplicative |

**Key Learning:** Platform friction signals work as a SYSTEM, not individually.
- Custodian alone: 0.84x (negative)
- S65 alone: ~1.0x (neutral)
- Small firm alone: 2.36x (positive)
- ALL THREE + Bleeding: **3.57x** (multiplicative!)

### Implementation Details

**Files Modified:**
- `v3/sql/phase_4_v3_tiered_scoring.sql` - Added T1B_PRIME, upgraded T1G
- `pipeline/sql/January_2026_Lead_List_V3_V4_Hybrid.sql` - Updated tiers
- `v3/models/model_registry_v3.json` - Updated to V3.3.3

**New Features:**
- `has_portable_custodian` flag (Schwab/Fidelity/Pershing)
- `has_cfp` flag for T1B_PRIME exclusion
- Refined AUM range ($500K-$2M)

---

Log the changes made.
```

---

## STEP 9: Update VERSION_3_MODEL_REPORT.md

**Purpose:** Add detailed documentation of the V3.3.3 analysis.

### Cursor Prompt 9.1: Document Analysis in Model Report

```
@workspace Update v3/VERSION_3_MODEL_REPORT.md for V3.3.3 Matrix Effects Analysis.

LOCATION: v3/VERSION_3_MODEL_REPORT.md

TASK: Add a new section after the V3.3.2 section:

---

### V3.3.3 Matrix Effects Analysis (January 2026)

#### Background

Following V3.3.2, we conducted a comprehensive "Matrix Effects" analysis to find interaction effects and hidden patterns. This combined two independent approaches:

1. **Internal Analysis:** Credential stacking, tenure matrices, current firm tenure
2. **External Theory:** Succession gap, platform friction, AUM sweet spot

#### Major Discoveries

**1. Zero Friction Triple Combo (T1B_PRIME)**

| Component | Individual Lift | Combined with Others |
|-----------|-----------------|---------------------|
| Series 65 Only | ~1.0x | - |
| Portable Custodian | 0.84x | - |
| Small Firm (≤10) | 2.36x | - |
| **All Three + Bleeding** | - | **3.57x** |

**TRUE INTERACTION EFFECT:** The combination creates multiplicative, not additive, lift.

**2. AUM Sweet Spot (T1G_ENHANCED)**

| AUM Range | Leads | Conv Rate | Lift |
|-----------|-------|-----------|------|
| Sweet Spot ($500K-$2M) | 66 | 9.09% | 2.38x |
| Outside Range | 59 | 5.08% | 1.33x |

**Why $500K-$2M Works:**
- Client loyalty threshold: Accounts large enough that clients follow advisor
- Institutional avoidance: Accounts small enough to avoid lock-in

#### Validation Results

**T1B_PRIME Overlap Analysis:**
- Total T1B_PRIME leads: 23
- Overlap with T1A (has CFP): 1 lead
- Unique T1B_PRIME leads: 22
- Conversion (unique): 13.64% (3.57x lift)

**T1G_ENHANCED Subset Confirmation:**
- T1G_ENHANCED is proper subset of T1G (confirmed)
- 79% improvement in conversion (9.09% vs 5.08%)

#### Tier Priority Order (V3.3.3)

```sql
-- 1. T1B_PRIME: Zero Friction Bleeder (13.64%)
WHEN has_series_65_only = 1 
     AND has_portable_custodian = 1 
     AND firm_rep_count <= 10 
     AND firm_net_change_12mo <= -3
     AND has_cfp = 0
THEN 'TIER_1B_PRIME_ZERO_FRICTION'

-- 2. T1A: CFP + Bleeding (10.00%)
WHEN has_cfp = 1 AND firm_net_change_12mo <= -3
THEN 'TIER_1A_PRIME_MOVER_CFP'

-- 3. T1G_ENHANCED: Sweet Spot (9.09%)
WHEN industry_tenure_months BETWEEN 60 AND 180
     AND avg_account_size BETWEEN 500000 AND 2000000
     AND firm_net_change_12mo > -3
THEN 'TIER_1G_ENHANCED_SWEET_SPOT'

-- 4. T1B: S65 + Bleeding (5.49%)
WHEN has_series_65_only = 1 AND firm_net_change_12mo <= -3
THEN 'TIER_1B_PRIME_MOVER_SERIES65'

-- 5. T1G_REMAINDER: Outside Sweet Spot (5.08%)
WHEN industry_tenure_months BETWEEN 60 AND 180
     AND avg_account_size >= 250000
     AND firm_net_change_12mo > -3
THEN 'TIER_1G_GROWTH_STAGE'
```

#### Key Learnings

1. **Matrix Effects Are Real:** True interaction effects exist (A×B > A + B)
2. **Platform Friction is a System:** Individual signals fail; combinations work
3. **Sweet Spot is Contingent:** $500K-$2M only works with growth stage criteria
4. **Credential Stacking Doesn't Work:** CFP + CFA doesn't outperform CFP alone
5. **Succession Gap Deferred:** Firm age data not available

---

Log the changes made.
```

---

## STEP 10: Run Post-Implementation Validation

**Purpose:** Verify the changes are working correctly.

### Cursor Prompt 10.1: Validate V3.3.3 Implementation

```
@workspace After implementing V3.3.3 changes, run validation queries via MCP BigQuery.

VALIDATION SUITE:

-- ============================================================================
-- VALIDATION 1: Check T1B_PRIME tier exists
-- ============================================================================
SELECT 
    score_tier,
    COUNT(*) as leads,
    ROUND(AVG(expected_conversion_rate) * 100, 2) as expected_conv_pct
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3`
WHERE score_tier = 'TIER_1B_PRIME_ZERO_FRICTION'
GROUP BY score_tier;

-- Expected: ~22 leads, 13.64% expected rate

-- ============================================================================
-- VALIDATION 2: Check T1G_ENHANCED tier exists
-- ============================================================================
SELECT 
    score_tier,
    COUNT(*) as leads,
    ROUND(AVG(expected_conversion_rate) * 100, 2) as expected_conv_pct
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3`
WHERE score_tier IN ('TIER_1G_ENHANCED_SWEET_SPOT', 'TIER_1G_GROWTH_STAGE')
GROUP BY score_tier
ORDER BY expected_conv_pct DESC;

-- Expected: T1G_ENHANCED ~66 leads at 9.09%, T1G_REMAINDER ~59 leads at 5.08%

-- ============================================================================
-- VALIDATION 3: Check T1B_PRIME has no CFP overlap
-- ============================================================================
SELECT 
    'T1B_PRIME CFP Check' as check_type,
    COUNT(*) as leads,
    COUNTIF(CONTACT_BIO LIKE '%CFP%' OR TITLE_NAME LIKE '%CFP%') as has_cfp_count
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3` ls
JOIN `savvy-gtm-analytics.FinTrx_data_CA.ria_contacts_current` c
    ON ls.advisor_crd = c.RIA_CONTACT_CRD_ID
WHERE ls.score_tier = 'TIER_1B_PRIME_ZERO_FRICTION';

-- Expected: has_cfp_count = 0 (all CFP leads should go to T1A)

-- ============================================================================
-- VALIDATION 4: Check T1B_PRIME criteria are correct
-- ============================================================================
SELECT 
    'T1B_PRIME Criteria Check' as check_type,
    COUNT(*) as leads,
    COUNTIF(f.firm_rep_count_at_contact <= 10) as small_firm_count,
    COUNTIF(f.firm_net_change_12mo <= -3) as bleeding_count,
    COUNTIF(fc.has_portable_custodian = 1) as portable_custodian_count
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3` ls
JOIN `savvy-gtm-analytics.ml_features.lead_scoring_features_pit` f
    ON ls.lead_id = f.lead_id
JOIN (
    SELECT CRD_ID as firm_crd,
           CASE WHEN UPPER(CUSTODIAN_PRIMARY_BUSINESS_NAME) LIKE '%SCHWAB%' 
                     OR UPPER(CUSTODIAN_PRIMARY_BUSINESS_NAME) LIKE '%FIDELITY%'
                     OR UPPER(CUSTODIAN_PRIMARY_BUSINESS_NAME) LIKE '%PERSHING%'
                THEN 1 ELSE 0 END as has_portable_custodian
    FROM `savvy-gtm-analytics.FinTrx_data_CA.ria_firms_current`
) fc ON f.firm_crd = fc.firm_crd
WHERE ls.score_tier = 'TIER_1B_PRIME_ZERO_FRICTION';

-- Expected: All counts should equal total leads (all criteria met)

-- ============================================================================
-- VALIDATION 5: Check T1G_ENHANCED AUM range
-- ============================================================================
SELECT 
    'T1G_ENHANCED AUM Check' as check_type,
    COUNT(*) as leads,
    ROUND(MIN(fas.avg_account_size), 0) as min_avg_account,
    ROUND(MAX(fas.avg_account_size), 0) as max_avg_account
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3` ls
JOIN `savvy-gtm-analytics.ml_features.lead_scoring_features_pit` f
    ON ls.lead_id = f.lead_id
JOIN (
    SELECT CRD_ID as firm_crd, SAFE_DIVIDE(TOTAL_AUM, TOTAL_ACCOUNTS) as avg_account_size
    FROM `savvy-gtm-analytics.FinTrx_data_CA.ria_firms_current`
) fas ON f.firm_crd = fas.firm_crd
WHERE ls.score_tier = 'TIER_1G_ENHANCED_SWEET_SPOT';

-- Expected: min >= 500,000 AND max <= 2,000,000

-- ============================================================================
-- VALIDATION 6: Full tier distribution comparison
-- ============================================================================
SELECT 
    score_tier,
    COUNT(*) as leads,
    ROUND(AVG(expected_conversion_rate) * 100, 2) as expected_conv_pct
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3`
WHERE score_tier LIKE 'TIER_1%'
GROUP BY score_tier
ORDER BY expected_conv_pct DESC;

-- Expected order: T1B_PRIME (13.64%) > T1A (10%) > T1G_ENHANCED (9.09%) > T1B (5.49%) > T1G (5.08%)

Report results and flag any issues.
```

---

## SQL Code Snippets Reference

### Complete T1B_PRIME Logic

```sql
-- =============================================================================
-- TIER 1B_PRIME: ZERO FRICTION BLEEDER
-- =============================================================================
-- V3.3.3: NEW - Highest converting segment (13.64%, 3.57x lift)
-- 
-- CRITERIA:
-- - Series 65 Only (no Series 7)
-- - Portable Custodian (Schwab/Fidelity/Pershing)
-- - Small Firm (≤10 reps)
-- - Firm Bleeding (net_change ≤ -3)
-- - NO CFP (CFP leads go to T1A)
-- =============================================================================
WHEN has_series_65_only = 1
     AND has_portable_custodian = 1
     AND firm_rep_count_at_contact <= 10
     AND firm_net_change_12mo <= -3
     AND has_cfp = 0
     AND is_wirehouse = 0
     AND is_excluded_title = 0
THEN 'TIER_1B_PRIME_ZERO_FRICTION'
```

### Complete T1G_ENHANCED Logic

```sql
-- =============================================================================
-- TIER 1G_ENHANCED: SWEET SPOT GROWTH ADVISOR
-- =============================================================================
-- V3.3.3: UPGRADED from T1G - Refined AUM to $500K-$2M
-- Conversion: 9.09% (2.38x lift) vs 5.08% for outside range
-- =============================================================================
WHEN industry_tenure_months BETWEEN 60 AND 180
     AND avg_account_size BETWEEN 500000 AND 2000000
     AND firm_net_change_12mo > -3
     AND is_wirehouse = 0
     AND is_excluded_title = 0
THEN 'TIER_1G_ENHANCED_SWEET_SPOT'
```

### Complete Tier Priority Order (V3.3.3)

```sql
CASE 
    -- Priority 1: T1B_PRIME - Zero Friction Bleeder (13.64%)
    WHEN has_series_65_only = 1
         AND has_portable_custodian = 1
         AND firm_rep_count_at_contact <= 10
         AND firm_net_change_12mo <= -3
         AND has_cfp = 0
         AND is_wirehouse = 0
    THEN 'TIER_1B_PRIME_ZERO_FRICTION'
    
    -- Priority 2: T1A - CFP + Bleeding (10.00%)
    WHEN has_cfp = 1
         AND firm_net_change_12mo <= -3
         AND is_wirehouse = 0
    THEN 'TIER_1A_PRIME_MOVER_CFP'
    
    -- Priority 3: T1G_ENHANCED - Sweet Spot (9.09%)
    WHEN industry_tenure_months BETWEEN 60 AND 180
         AND avg_account_size BETWEEN 500000 AND 2000000
         AND firm_net_change_12mo > -3
         AND is_wirehouse = 0
    THEN 'TIER_1G_ENHANCED_SWEET_SPOT'
    
    -- Priority 4: T1B - S65 + Bleeding (5.49%)
    WHEN has_series_65_only = 1
         AND firm_net_change_12mo <= -3
         AND is_wirehouse = 0
    THEN 'TIER_1B_PRIME_MOVER_SERIES65'
    
    -- Priority 5: T1G_REMAINDER - Outside Sweet Spot (5.08%)
    WHEN industry_tenure_months BETWEEN 60 AND 180
         AND avg_account_size >= 250000
         AND firm_net_change_12mo > -3
         AND is_wirehouse = 0
    THEN 'TIER_1G_GROWTH_STAGE'
    
    -- Priority 6+: T1F, T2, T3, etc.
    -- ... existing tier logic
    
END as score_tier
```

### Expected Conversion Rates (V3.3.3)

```sql
CASE 
    WHEN score_tier = 'TIER_1B_PRIME_ZERO_FRICTION' THEN 0.1364
    WHEN score_tier = 'TIER_1A_PRIME_MOVER_CFP' THEN 0.1000
    WHEN score_tier = 'TIER_1G_ENHANCED_SWEET_SPOT' THEN 0.0909
    WHEN score_tier = 'TIER_1B_PRIME_MOVER_SERIES65' THEN 0.0549
    WHEN score_tier = 'TIER_1G_GROWTH_STAGE' THEN 0.0508
    -- ... other tiers
END as expected_conversion_rate
```

---

## Rollback Plan

If issues arise after deployment:

```sql
-- Rollback: Disable T1B_PRIME
-- Change the T1B_PRIME WHEN clause to always return FALSE:

-- BEFORE:
WHEN has_series_65_only = 1
     AND has_portable_custodian = 1
     AND firm_rep_count_at_contact <= 10
     AND firm_net_change_12mo <= -3
     AND has_cfp = 0
THEN 'TIER_1B_PRIME_ZERO_FRICTION'

-- AFTER (disabled):
WHEN FALSE  -- V3.3.3 T1B_PRIME disabled for rollback
THEN 'TIER_1B_PRIME_ZERO_FRICTION'

-- Rollback: Revert T1G_ENHANCED to T1G
-- Change $500K-$2M back to $250K+:

-- BEFORE:
AND avg_account_size BETWEEN 500000 AND 2000000

-- AFTER (reverted):
AND avg_account_size >= 250000

-- Then revert model_registry_v3.json to V3.3.2
-- Regenerate lead list
```

---

## Post-Implementation Summary

After completing all steps, you should have:

| Deliverable | Location | Status |
|-------------|----------|--------|
| T1B_PRIME tier logic | `v3/sql/phase_4_v3_tiered_scoring.sql` | ⬜ |
| T1G_ENHANCED tier logic | `v3/sql/phase_4_v3_tiered_scoring.sql` | ⬜ |
| has_portable_custodian CTE | `v3/sql/phase_4_v3_tiered_scoring.sql` | ⬜ |
| has_cfp flag | `v3/sql/phase_4_v3_tiered_scoring.sql` | ⬜ |
| Updated lead list | `pipeline/sql/January_2026_Lead_List_V3_V4_Hybrid.sql` | ⬜ |
| Updated model registry | `v3/models/model_registry_v3.json` | ⬜ |
| Updated README | `README.md` | ⬜ |
| Updated model report | `v3/VERSION_3_MODEL_REPORT.md` | ⬜ |
| Validation passed | BigQuery results | ⬜ |

---

## Expected Impact

| Metric | Before V3.3.3 | After V3.3.3 | Change |
|--------|---------------|--------------|--------|
| Highest Tier | T1A (9.80%) | **T1B_PRIME (13.64%)** | **+39%** |
| T1G Performance | 7.20% | **9.09%** (Enhanced) | **+26%** |
| New Leads | 0 | 22 (T1B_PRIME) | +22 |
| Matrix Effects | None | 2 validated | +2 |

---

## Appendix: Quick Reference

### T1B_PRIME Criteria
| Criterion | Value | Purpose |
|-----------|-------|---------|
| Series 65 Only | ✅ (no Series 7) | No BD lock-in |
| Portable Custodian | Schwab/Fidelity/Pershing | Platform continuity |
| Small Firm | ≤10 reps | No bureaucracy |
| Bleeding Firm | net_change ≤ -3 | Motivation |
| No CFP | ✅ | CFP goes to T1A |

### T1G_ENHANCED Criteria
| Criterion | Value | Purpose |
|-----------|-------|---------|
| Industry Tenure | 5-15 years | Mid-career growth |
| Avg Account Size | $500K-$2M | Sweet spot |
| Firm Stability | net_change > -3 | Proactive mover |

---

*V3.3.3 Implementation Guide - Created January 2026*
