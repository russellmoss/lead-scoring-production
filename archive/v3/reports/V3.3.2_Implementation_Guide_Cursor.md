# V3.3.2 Implementation Guide: T1G Growth Stage Advisor Tier

## Cursor.ai Step-by-Step Implementation

**Version:** V3.3.2_01012026_GROWTH_STAGE_TIER  
**Date:** January 2026  
**Purpose:** Add T1G Growth Stage Advisor tier to capture "proactive movers" at stable firms

---

## Executive Summary

### What We're Implementing

| Tier | Definition | Conversion | Lift | Leads |
|------|------------|------------|------|-------|
| **T1G (NEW)** | Mid-career + Established practice + Stable firm | **7.20%** | **1.88x** | 125 |

### Why This Matters

We discovered a completely **new type of high-converting lead**:

| Mover Type | Firm Status | Motivation | Example Tiers |
|------------|-------------|------------|---------------|
| **Reactive Movers** | Bleeding | "My firm is failing, I need to leave" | T1A, T1B, T1F |
| **Proactive Movers** ‚≠ê | **Stable** | "I've outgrown my firm, I want better" | **T1G (NEW)** |

**T1G captures advisors who:**
- Have built an established practice ($250K+ avg account size)
- Are mid-career (5-15 years) and still growing
- Are at stable firms (not bleeding) but want a better platform
- Are making strategic career moves, not crisis-driven decisions

### Validation Results

| Check | Result | Status |
|-------|--------|--------|
| Lift ‚â• 1.5x | 1.88x | ‚úÖ PASS |
| Sample ‚â• 50 | 125 leads | ‚úÖ PASS |
| Overlap with T1A | 0 leads | ‚úÖ PASS |
| Overlap with T1B | 0 leads | ‚úÖ PASS |
| Statistical Significance | 95% CI does not overlap baseline | ‚úÖ PASS |

---

## Pre-Implementation Checklist

Before starting, verify:
- [ ] BigQuery access configured
- [ ] MCP BigQuery connection working in Cursor.ai
- [ ] V3.3.1 changes already deployed (Low Discretionary exclusion)
- [ ] Backup of current `phase_4_v3_tiered_scoring.sql`
- [ ] Backup of current `January_2026_Lead_List_V3_V4_Hybrid.sql`

---

## STEP 1: Add avg_account_size Calculation

**Purpose:** T1G requires `avg_account_size` which may not exist in current pipeline.

### Cursor Prompt 1.1: Check if avg_account_size Exists

```
@workspace Check if avg_account_size is already calculated in the lead scoring pipeline.

Search for "avg_account_size" in these files:
- v3/sql/phase_4_v3_tiered_scoring.sql
- pipeline/sql/January_2026_Lead_List_V3_V4_Hybrid.sql
- pipeline/sql/v4_prospect_features.sql

If NOT found, we need to add it. Report what you find.
```

### Cursor Prompt 1.2: Add avg_account_size CTE (If Needed)

```
@workspace Add avg_account_size calculation to v3/sql/phase_4_v3_tiered_scoring.sql.

LOCATION: v3/sql/phase_4_v3_tiered_scoring.sql

TASK: Add a new CTE called `firm_account_size` after the `firm_discretionary` CTE (added in V3.3.1):

```sql
-- V3.3.2: Firm average account size for T1G Growth Stage tier
-- Calculated as TOTAL_AUM / TOTAL_ACCOUNTS
-- Used to identify "established practice" advisors ($250K+ avg)
-- Source: V3.3.2 Growth Stage Hypothesis Validation (December 2025)
firm_account_size AS (
    SELECT 
        CRD_ID as firm_crd,
        TOTAL_AUM,
        TOTAL_ACCOUNTS,
        SAFE_DIVIDE(TOTAL_AUM, TOTAL_ACCOUNTS) as avg_account_size,
        CASE 
            WHEN SAFE_DIVIDE(TOTAL_AUM, TOTAL_ACCOUNTS) >= 250000 THEN 'ESTABLISHED'
            WHEN SAFE_DIVIDE(TOTAL_AUM, TOTAL_ACCOUNTS) IS NULL THEN 'UNKNOWN'
            ELSE 'GROWTH_STAGE'
        END as practice_maturity
    FROM `savvy-gtm-analytics.FinTrx_data_CA.ria_firms_current`
    WHERE TOTAL_AUM > 0 AND TOTAL_ACCOUNTS > 0
),
```

Then add the join in the `leads_with_flags` CTE:
```sql
LEFT JOIN firm_account_size fas ON lf.firm_crd = fas.firm_crd
```

And add these fields to the SELECT:
```sql
COALESCE(fas.avg_account_size, 0) as avg_account_size,
COALESCE(fas.practice_maturity, 'UNKNOWN') as practice_maturity,
```

Log the changes made.
```

---

## STEP 2: Add T1G Tier Logic

**Purpose:** Add the T1G Growth Stage Advisor tier to the scoring logic.

### Cursor Prompt 2.1: Add T1G to Tier Assignment

```
@workspace Add T1G Growth Stage Advisor tier to v3/sql/phase_4_v3_tiered_scoring.sql.

LOCATION: v3/sql/phase_4_v3_tiered_scoring.sql

CONTEXT:
T1G captures "proactive movers" - advisors at STABLE firms who want to level up.
This is DIFFERENT from T1A/T1B which target BLEEDING firms.

T1G CRITERIA (all must be true):
- industry_tenure_months BETWEEN 60 AND 180 (5-15 years mid-career)
- avg_account_size >= 250000 (established practice)
- firm_net_change_12mo > -3 (stable firm, NOT bleeding)

EXPECTED PERFORMANCE:
- Conversion: 7.20%
- Lift: 1.88x baseline
- Sample: 125 leads

TASK: Find the CASE statement that assigns tiers (likely in `scored_prospects` or similar CTE).

Add T1G AFTER the bleeding-firm tiers (T1A, T1B, T1, T1F) but BEFORE T2 and lower tiers:

```sql
-- ==========================================================================
-- TIER 1G: GROWTH STAGE ADVISOR (Proactive Movers at Stable Firms)
-- ==========================================================================
-- V3.3.2: NEW TIER - Captures "proactive movers" at stable firms
-- 
-- THEORY: These advisors have built a successful practice but hit a ceiling.
-- They're not in crisis (stable firm), but want a better platform to grow.
-- This is DIFFERENT from T1A/T1B which target crisis-driven movers.
--
-- VALIDATION:
-- - Conversion: 7.20% (1.88x baseline)
-- - Sample: 125 leads
-- - Zero overlap with bleeding-firm tiers (mutually exclusive)
--
-- CRITERIA:
-- - Mid-career (5-15 years) - Still growing, not established/complacent
-- - Established practice ($250K+ avg account) - Has real book to move
-- - Stable firm (net_change > -3) - Strategic move, not crisis
-- ==========================================================================
WHEN industry_tenure_months BETWEEN 60 AND 180  -- Mid-career (5-15 years)
     AND avg_account_size >= 250000              -- Established practice
     AND firm_net_change_12mo > -3               -- Stable firm (NOT bleeding)
     AND is_wirehouse = 0                        -- Not at wirehouse
     AND is_excluded_title = 0                   -- Not excluded title
THEN 'TIER_1G_GROWTH_STAGE_ADVISOR'
```

IMPORTANT: T1G must be checked AFTER bleeding-firm tiers but BEFORE general tiers.
The order should be:
1. T1A (CFP + Bleeding)
2. T1B (Series65 + Bleeding)
3. T1 (Prime Mover + Bleeding)
4. T1F (HV Wealth + Bleeding)
5. T1G (Growth Stage + Stable) ‚Üê NEW
6. T2, T3, etc.

Log all changes made.
```

### Cursor Prompt 2.2: Add T1G Expected Conversion Rate

```
@workspace Add T1G expected conversion rate to the tier metrics.

LOCATION: v3/sql/phase_4_v3_tiered_scoring.sql

TASK: Find where expected_conversion_rate is assigned for each tier.

Add T1G with expected rate of 0.072 (7.20%):

```sql
WHEN score_tier = 'TIER_1G_GROWTH_STAGE_ADVISOR' THEN 0.072
```

The tier rates should be ordered by conversion rate (highest first):
- T1A: 0.1648 (16.48%) - or update to 0.098 based on latest validation
- T1B: 0.1644 (16.44%) - or update to 0.062 based on latest validation
- T1G: 0.072 (7.20%) ‚Üê NEW
- T1: varies
- T1F: varies
- etc.

NOTE: The original T1A/T1B rates (16%+) were from historical validation. 
The current validation shows different rates. Decide whether to:
A) Keep original rates (historical average)
B) Update to current validation rates

Log what you find and what you changed.
```

### Cursor Prompt 2.3: Add T1G Score Narrative

```
@workspace Add T1G score narrative to v3/sql/phase_4_v3_tiered_scoring.sql.

LOCATION: v3/sql/phase_4_v3_tiered_scoring.sql

TASK: Find where score_narrative or v3_score_narrative is generated.

Add T1G narrative:

```sql
WHEN score_tier = 'TIER_1G_GROWTH_STAGE_ADVISOR' THEN
    CONCAT(
        first_name, ' is a GROWTH STAGE ADVISOR: ',
        'Mid-career professional (', CAST(ROUND(industry_tenure_months/12, 0) AS STRING), ' years experience) ',
        'with an established practice at ', firm_name, '. ',
        'Firm is stable but advisor may be seeking platform upgrade. ',
        'Proactive mover - strategic growth opportunity, not crisis-driven.'
    )
```

Log the changes made.
```

---

## STEP 3: Update January Lead List Generation

**Purpose:** Apply T1G tier to monthly lead list generation.

### Cursor Prompt 3.1: Add T1G to Lead List SQL

```
@workspace Update pipeline/sql/January_2026_Lead_List_V3_V4_Hybrid.sql to include T1G tier.

LOCATION: pipeline/sql/January_2026_Lead_List_V3_V4_Hybrid.sql

TASKS:

1. Add firm_account_size CTE if not present (same as Step 1.2)

2. Add avg_account_size to the base prospects or enriched_prospects CTE

3. Add T1G tier logic to the tier assignment CASE statement:
```sql
WHEN industry_tenure_months BETWEEN 60 AND 180
     AND avg_account_size >= 250000
     AND firm_net_change_12mo > -3
     AND is_wirehouse = 0
     AND is_excluded_title = 0
THEN 'TIER_1G_GROWTH_STAGE_ADVISOR'
```

4. Add T1G to tier quota logic (if applicable):
```sql
WHEN score_tier = 'TIER_1G_GROWTH_STAGE_ADVISOR' THEN 0.072
```

5. Update header comment to reference V3.3.2

Log all changes made.
```

---

## STEP 4: Update Model Registry

**Purpose:** Document the version change formally.

### Cursor Prompt 4.1: Update Model Registry

```
@workspace Update v3/models/model_registry_v3.json to reflect V3.3.2.

LOCATION: v3/models/model_registry_v3.json

TASK: Update the following fields:

1. Change `model_version` to: "V3.3.2_01012026_GROWTH_STAGE_TIER"
2. Change `updated_date` to: "2026-01-01"
3. Add new `changes_from_v3.3.1` array:

```json
"changes_from_v3.3.1": [
    "ADDED: TIER_1G_GROWTH_STAGE_ADVISOR - Mid-career advisors at stable firms with established practices",
    "CRITERIA: industry_tenure 5-15 years + avg_account_size >= $250K + firm_net_change > -3 (stable)",
    "PERFORMANCE: 7.20% conversion rate (1.88x lift vs 3.82% baseline)",
    "SAMPLE SIZE: 125 leads (validated)",
    "KEY INSIGHT: Captures 'proactive movers' - advisors seeking platform upgrade, not crisis-driven",
    "ZERO OVERLAP: T1G is mutually exclusive with T1A/T1B (requires stable firm vs bleeding firm)",
    "NEW FEATURE: avg_account_size calculated from TOTAL_AUM / TOTAL_ACCOUNTS",
    "ANALYSIS: V3.3.2 Growth Stage Hypothesis Validation (December 2025)"
]
```

Also add the following to the tier_definitions section (if it exists):
```json
"TIER_1G_GROWTH_STAGE_ADVISOR": {
    "description": "Mid-career advisors at stable firms with established practices seeking platform upgrade",
    "criteria": {
        "industry_tenure_months": "60-180 (5-15 years)",
        "avg_account_size": ">= 250000",
        "firm_net_change_12mo": "> -3 (stable, not bleeding)"
    },
    "expected_conversion_rate": 0.072,
    "expected_lift": 1.88,
    "sample_size_validated": 125,
    "added_version": "V3.3.2"
}
```

Log the changes made.
```

---

## STEP 5: Update README.md

**Purpose:** Document the new tier and analysis findings.

### Cursor Prompt 5.1: Update Root README

```
@workspace Update the README.md at the root of the repository to document V3.3.2 changes.

LOCATION: README.md (root directory)

TASK: Add a new section after the V3.3.1 section:

---

## V3.3.2: Growth Stage Advisor Tier (January 2026)

### Background

Following the V3.3.1 analysis, we investigated additional "portable book" hypotheses. While most were invalidated (ownership, HNW focus, SMA usage), we discovered a powerful new segment:

**"Proactive Movers"** - Advisors at STABLE firms who are seeking a platform upgrade.

This is fundamentally different from our existing bleeding-firm tiers (T1A, T1B, T1F) which target "reactive movers" in crisis situations.

### The Discovery

| Mover Type | Firm Status | Motivation | Tiers |
|------------|-------------|------------|-------|
| **Reactive Movers** | Bleeding | "My firm is failing" | T1A, T1B, T1F |
| **Proactive Movers** ‚≠ê | **Stable** | "I want a better platform" | **T1G (NEW)** |

### T1G: Growth Stage Advisor

**Definition:**
```sql
WHEN industry_tenure_months BETWEEN 60 AND 180  -- 5-15 years (mid-career)
     AND avg_account_size >= 250000              -- Established practice ($250K+)
     AND firm_net_change_12mo > -3               -- Stable firm (not bleeding)
THEN 'TIER_1G_GROWTH_STAGE_ADVISOR'
```

**Performance:**
| Metric | Value |
|--------|-------|
| Conversion Rate | 7.20% |
| Lift vs Baseline | 1.88x |
| Sample Size | 125 leads |
| Overlap with T1A/T1B | 0 (mutually exclusive) |

**Why They Convert:**
1. **Strategic mindset** - Making thoughtful career decisions, not panic moves
2. **Established book** - Have real AUM ($250K+ avg account) to bring
3. **Growth-oriented** - Mid-career (5-15 years), still building
4. **Platform fit** - Need better technology/support to reach next level

### Updated Tier Hierarchy

| Priority | Tier | Definition | Conv Rate | Lift |
|----------|------|------------|-----------|------|
| 1 | T1A | CFP + Bleeding Firm | 9.80% | 2.57x |
| 2 | **T1G** | **Growth Stage (NEW)** | **7.20%** | **1.88x** |
| 3 | T1B | Series 65 + Bleeding | 6.18% | 1.62x |
| 4 | T1F | HV Wealth + Bleeding | ~5% | ~1.3x |
| 5 | T1 | Prime Mover + Bleeding | ~4% | ~1.0x |

### Implementation Details

**Files Modified:**
- `v3/sql/phase_4_v3_tiered_scoring.sql` - Added T1G tier logic + avg_account_size
- `pipeline/sql/January_2026_Lead_List_V3_V4_Hybrid.sql` - Added T1G to lead list
- `v3/models/model_registry_v3.json` - Updated to V3.3.2

**New Feature Added:**
```sql
-- avg_account_size = TOTAL_AUM / TOTAL_ACCOUNTS
-- Proxy for "established practice" - advisors with HNW clients
```

### Hypotheses Tested (V3.3.2 Analysis)

| Hypothesis | Expected | Actual | Result |
|------------|----------|--------|--------|
| Low Ownership (<5%) | + | 0.64x | ‚ùå INVERTED |
| HNW Focus ($500K+) | + | 0.54x | ‚ùå INVERTED |
| SMA Usage | + | N/A | ‚ùå Data issue |
| Portable Custodian | + | 0.88x | ‚ùå Not significant |
| **Growth Stage Combo** | + | **1.88x** | ‚úÖ **VALIDATED** |

**Key Learning:** Individual "portable book" signals don't predict conversion. The COMBINATION of mid-career + established practice + stable firm does.

---

Log the changes made.
```

---

## STEP 6: Update VERSION_3_MODEL_REPORT.md

**Purpose:** Add detailed documentation of the V3.3.2 analysis.

### Cursor Prompt 6.1: Document Analysis in Model Report

```
@workspace Update v3/VERSION_3_MODEL_REPORT.md to document the V3.3.2 Growth Stage analysis.

LOCATION: v3/VERSION_3_MODEL_REPORT.md

TASK: Add a new section after the V3.3.1 section:

---

### V3.3.2 Growth Stage Advisor Analysis (January 2026)

#### Background

Following V3.3.1, we tested additional "portable book" hypotheses:
1. Low Ownership Percentage (<5%)
2. Average Account Size / HNW Focus
3. SMA/Investment Style Usage
4. Portable Custodian Signal

Most were **invalidated** (inverted or not significant). However, we discovered a powerful new segment through combination analysis.

#### Hypothesis Testing Results

**Individual Signals (All Failed):**

| Signal | Expected Lift | Actual Lift | Result |
|--------|---------------|-------------|--------|
| Low Ownership (<5%) | >1.5x | 0.64x | ‚ùå INVERTED |
| No Ownership (0%) | >1.5x | 0.64x | ‚ùå INVERTED |
| HNW Focus ($500K+ avg) | >1.5x | 0.54x | ‚ùå INVERTED |
| Ultra-HNW ($5M+ avg) | >1.5x | 0.54x | ‚ùå WORST |
| Retail (<$100K avg) | <1.0x | 1.10x | ü§î INVERTED |
| SMA Usage | >1.5x | N/A | ‚ùå Data quality |
| Portable Custodian | >1.5x | 0.88x | ‚ùå Not significant |

**Combination Analysis (Success):**

| Combination | Conv Rate | Lift | Sample |
|-------------|-----------|------|--------|
| **Established + Stable + Mid-Career** | **7.20%** | **1.88x** | **125** |
| Growth Focus + Bleeding + Senior | 5.79% | 1.52x | 190 |
| Established + Stable + Senior | 5.41% | 1.42x | 148 |
| Established + Bleeding + Mid-Career | 4.87% | 1.27x | 308 |

#### The "Proactive Mover" Discovery

We identified a fundamentally different type of high-converting lead:

**Reactive Movers (Existing Tiers):**
- Firm is bleeding (unstable)
- Motivated by crisis/fear
- "I need to leave before the ship sinks"
- Tiers: T1A, T1B, T1F

**Proactive Movers (NEW T1G):**
- Firm is stable (not bleeding)
- Motivated by ambition/growth
- "I've outgrown my platform and want better"
- Requires: Mid-career + Established practice

#### T1G Tier Definition

```sql
WHEN industry_tenure_months BETWEEN 60 AND 180  -- 5-15 years
     AND avg_account_size >= 250000              -- $250K+ avg account
     AND firm_net_change_12mo > -3               -- Stable firm
THEN 'TIER_1G_GROWTH_STAGE_ADVISOR'
```

**Criteria Explanation:**
- **Mid-career (5-15 years):** Still growing, not established/complacent
- **Established practice ($250K+):** Has real book to transfer, not building from scratch
- **Stable firm:** Not in crisis mode, making strategic decision

#### Validation Results

| Check | Threshold | Result | Status |
|-------|-----------|--------|--------|
| Conversion Rate | >1.5x baseline | 7.20% (1.88x) | ‚úÖ PASS |
| Sample Size | ‚â•50 leads | 125 leads | ‚úÖ PASS |
| Overlap with T1A | 0 leads | 0 leads | ‚úÖ PASS |
| Overlap with T1B | 0 leads | 0 leads | ‚úÖ PASS |
| 95% CI | Non-overlapping | ‚úÖ | ‚úÖ PASS |

#### Zero Overlap Verification

T1G is **mutually exclusive** with existing tiers because:
- T1A/T1B/T1F require `firm_net_change_12mo <= -3` (bleeding)
- T1G requires `firm_net_change_12mo > -3` (stable)

These conditions cannot both be true simultaneously.

#### CFP Detection Fix

During validation, we discovered the CFP detection was using wrong field:

**Wrong (V3.3.2 initial validation):**
```sql
CASE WHEN REP_LICENSES LIKE '%CFP%' THEN 1 ELSE 0 END  -- WRONG!
```

**Correct (Fixed):**
```sql
CASE WHEN CONTACT_BIO LIKE '%CFP%' 
     OR CONTACT_BIO LIKE '%Certified Financial Planner%'
     OR TITLE_NAME LIKE '%CFP%'
THEN 1 ELSE 0 END  -- CORRECT
```

CFP is a professional certification, not a securities license. The correct fields are `CONTACT_BIO` and `TITLE_NAME`, not `REP_LICENSES`.

#### Updated Tier Performance

With correct CFP detection:

| Tier | Definition | Leads | Conv Rate | Lift |
|------|------------|-------|-----------|------|
| T1A | CFP + Bleeding | 51 | 9.80% | 2.57x |
| T1G | Growth Stage | 125 | 7.20% | 1.88x |
| T1B | Series65 + Bleeding | 259 | 6.18% | 1.62x |
| Other | - | 29,517 | 2.46% | 0.64x |

#### Key Learnings

1. **"Portable book" signals don't work individually** - Ownership, HNW focus, SMA usage all failed or inverted

2. **Combinations matter** - The specific combo of mid-career + established + stable is predictive

3. **Two types of movers** - Reactive (bleeding firm) and Proactive (stable firm) are both valid targets

4. **CFP signal is combination-dependent** - CFP alone is 0.84x, but CFP + Bleeding = 2.57x

5. **Counter-intuitive findings** - HNW advisors convert WORSE (too established), retail advisors convert BETTER (still growing)

---

Log the changes made.
```

---

## STEP 7: Run Post-Implementation Validation

**Purpose:** Verify the changes are working correctly.

### Cursor Prompt 7.1: Validate T1G Implementation

```
@workspace After implementing V3.3.2 changes, run validation queries via MCP BigQuery.

VALIDATION SUITE:

-- ============================================================================
-- VALIDATION 1: Check T1G tier is being assigned
-- ============================================================================
SELECT 
    score_tier,
    COUNT(*) as leads,
    ROUND(AVG(expected_conversion_rate) * 100, 2) as expected_conv_pct
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3`
WHERE score_tier LIKE 'TIER_1%'
GROUP BY score_tier
ORDER BY expected_conv_pct DESC;

-- Expected: T1G should appear with ~125 leads and 7.2% expected rate

-- ============================================================================
-- VALIDATION 2: Check T1G has no overlap with bleeding-firm tiers
-- ============================================================================
SELECT 
    'T1G Leads' as check_type,
    COUNT(*) as count,
    COUNTIF(firm_net_change_12mo <= -3) as bleeding_firm_count,
    ROUND(COUNTIF(firm_net_change_12mo <= -3) / COUNT(*) * 100, 2) as bleeding_pct
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3` ls
JOIN `savvy-gtm-analytics.ml_features.lead_scoring_features_pit` f
    ON ls.lead_id = f.lead_id
WHERE ls.score_tier = 'TIER_1G_GROWTH_STAGE_ADVISOR';

-- Expected: bleeding_firm_count = 0, bleeding_pct = 0

-- ============================================================================
-- VALIDATION 3: Check T1G criteria are correct
-- ============================================================================
SELECT 
    'T1G Criteria Check' as check_type,
    COUNT(*) as t1g_leads,
    ROUND(AVG(f.industry_tenure_months), 1) as avg_tenure_months,
    ROUND(AVG(f.industry_tenure_months) / 12, 1) as avg_tenure_years,
    ROUND(AVG(fas.avg_account_size), 0) as avg_account_size,
    ROUND(AVG(f.firm_net_change_12mo), 1) as avg_firm_net_change
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3` ls
JOIN `savvy-gtm-analytics.ml_features.lead_scoring_features_pit` f
    ON ls.lead_id = f.lead_id
JOIN (
    SELECT CRD_ID as firm_crd, SAFE_DIVIDE(TOTAL_AUM, TOTAL_ACCOUNTS) as avg_account_size
    FROM `savvy-gtm-analytics.FinTrx_data_CA.ria_firms_current`
) fas ON f.firm_crd = fas.firm_crd
WHERE ls.score_tier = 'TIER_1G_GROWTH_STAGE_ADVISOR';

-- Expected:
-- avg_tenure_years: 5-15 (mid-career)
-- avg_account_size: >= 250,000
-- avg_firm_net_change: > -3 (stable)

-- ============================================================================
-- VALIDATION 4: Compare tier conversion rates (historical)
-- ============================================================================
SELECT 
    ls.score_tier,
    COUNT(*) as leads,
    SUM(CASE WHEN f.target = 1 THEN 1 ELSE 0 END) as conversions,
    ROUND(AVG(CASE WHEN f.target = 1 THEN 1.0 ELSE 0.0 END) * 100, 2) as actual_conv_pct,
    ROUND(AVG(ls.expected_conversion_rate) * 100, 2) as expected_conv_pct
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3` ls
JOIN `savvy-gtm-analytics.ml_features.v4_target_variable` f
    ON ls.lead_id = f.lead_id
WHERE ls.score_tier LIKE 'TIER_1%'
GROUP BY ls.score_tier
ORDER BY actual_conv_pct DESC;

-- Expected: T1G should show ~7% actual conversion rate

Report results and flag any issues.
```

### Cursor Prompt 7.2: Regenerate January Lead List

```
@workspace After validation passes, regenerate the January 2026 lead list with T1G tier.

TASK 1: Run the updated January_2026_Lead_List_V3_V4_Hybrid.sql via MCP BigQuery.

TASK 2: Compare old vs new lead list:
```sql
-- Compare lead counts by tier
SELECT 
    'New List (V3.3.2)' as version,
    score_tier,
    COUNT(*) as leads
FROM `savvy-gtm-analytics.ml_features.january_2026_lead_list_v332`
GROUP BY score_tier

UNION ALL

SELECT 
    'Old List (V3.3.1)' as version,
    score_tier,
    COUNT(*) as leads
FROM `savvy-gtm-analytics.ml_features.january_2026_lead_list`
GROUP BY score_tier

ORDER BY version, leads DESC;
```

TASK 3: Verify T1G leads are in the new list:
```sql
SELECT 
    score_tier,
    COUNT(*) as leads,
    ROUND(AVG(expected_rate_pct), 2) as avg_expected_rate
FROM `savvy-gtm-analytics.ml_features.january_2026_lead_list_v332`
WHERE score_tier = 'TIER_1G_GROWTH_STAGE_ADVISOR'
GROUP BY score_tier;
```

TASK 4: Log results to pipeline/logs/EXECUTION_LOG.md
```

---

## STEP 8: Final Validation & Deployment

### Cursor Prompt 8.1: Final Checklist

```
@workspace Run final V3.3.2 deployment checklist.

CHECKLIST:

1. [ ] T1G tier appears in lead_scores_v3 table
2. [ ] T1G has correct criteria (5-15yr tenure, $250K+ avg, stable firm)
3. [ ] T1G has 0 overlap with bleeding-firm tiers
4. [ ] T1G expected conversion rate is 0.072 (7.2%)
5. [ ] avg_account_size is being calculated correctly
6. [ ] January lead list includes T1G leads
7. [ ] Model registry updated to V3.3.2
8. [ ] README updated with V3.3.2 section
9. [ ] VERSION_3_MODEL_REPORT.md updated

Run these final checks:

```sql
-- Final Check 1: T1G exists and has correct count
SELECT 
    CASE WHEN COUNT(*) > 0 THEN 'PASS' ELSE 'FAIL' END as t1g_exists,
    COUNT(*) as t1g_count
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3`
WHERE score_tier = 'TIER_1G_GROWTH_STAGE_ADVISOR';

-- Final Check 2: T1G has correct expected rate
SELECT 
    CASE WHEN ROUND(AVG(expected_conversion_rate), 3) = 0.072 THEN 'PASS' ELSE 'CHECK' END as rate_check,
    ROUND(AVG(expected_conversion_rate), 4) as actual_rate
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3`
WHERE score_tier = 'TIER_1G_GROWTH_STAGE_ADVISOR';

-- Final Check 3: Version updated in model registry
-- (Manual check - verify model_registry_v3.json says V3.3.2)
```

Report final status: DEPLOYED / ISSUES FOUND
```

---

## SQL Code Snippets Reference

### Complete T1G CTE Addition

```sql
-- =============================================================================
-- V3.3.2: FIRM ACCOUNT SIZE FOR T1G GROWTH STAGE TIER
-- =============================================================================
firm_account_size AS (
    SELECT 
        CRD_ID as firm_crd,
        TOTAL_AUM,
        TOTAL_ACCOUNTS,
        SAFE_DIVIDE(TOTAL_AUM, TOTAL_ACCOUNTS) as avg_account_size,
        CASE 
            WHEN SAFE_DIVIDE(TOTAL_AUM, TOTAL_ACCOUNTS) >= 250000 THEN 'ESTABLISHED'
            WHEN SAFE_DIVIDE(TOTAL_AUM, TOTAL_ACCOUNTS) IS NULL THEN 'UNKNOWN'
            ELSE 'GROWTH_STAGE'
        END as practice_maturity
    FROM `savvy-gtm-analytics.FinTrx_data_CA.ria_firms_current`
    WHERE TOTAL_AUM > 0 AND TOTAL_ACCOUNTS > 0
),
```

### Complete T1G Tier Logic

```sql
-- =============================================================================
-- TIER 1G: GROWTH STAGE ADVISOR (Proactive Movers at Stable Firms)
-- =============================================================================
-- V3.3.2: NEW TIER
-- Conversion: 7.20% | Lift: 1.88x | Sample: 125 leads
-- 
-- Captures "proactive movers" - advisors seeking platform upgrade
-- DIFFERENT from T1A/T1B which target crisis-driven movers
-- =============================================================================
WHEN industry_tenure_months BETWEEN 60 AND 180  -- Mid-career (5-15 years)
     AND avg_account_size >= 250000              -- Established practice ($250K+)
     AND firm_net_change_12mo > -3               -- Stable firm (NOT bleeding)
     AND is_wirehouse = 0                        -- Not at wirehouse
     AND is_excluded_title = 0                   -- Not excluded title
THEN 'TIER_1G_GROWTH_STAGE_ADVISOR'
```

### T1G Expected Rate

```sql
WHEN score_tier = 'TIER_1G_GROWTH_STAGE_ADVISOR' THEN 0.072
```

### T1G Narrative

```sql
WHEN score_tier = 'TIER_1G_GROWTH_STAGE_ADVISOR' THEN
    CONCAT(
        first_name, ' is a GROWTH STAGE ADVISOR: ',
        'Mid-career professional (', CAST(ROUND(industry_tenure_months/12, 0) AS STRING), ' years) ',
        'with established practice at ', firm_name, '. ',
        'Firm is stable - this is a strategic growth opportunity, not crisis-driven.'
    )
```

---

## Rollback Plan

If issues arise after deployment:

```sql
-- Rollback: Remove T1G from tier logic
-- Change the T1G WHEN clause to always return FALSE:

-- BEFORE:
WHEN industry_tenure_months BETWEEN 60 AND 180
     AND avg_account_size >= 250000
     AND firm_net_change_12mo > -3
THEN 'TIER_1G_GROWTH_STAGE_ADVISOR'

-- AFTER (disabled):
WHEN FALSE  -- V3.3.2 T1G disabled for rollback
THEN 'TIER_1G_GROWTH_STAGE_ADVISOR'

-- Then revert model_registry_v3.json to V3.3.1
-- Regenerate lead list
```

---

## Post-Implementation Summary

After completing all steps, you should have:

| Deliverable | Location | Status |
|-------------|----------|--------|
| T1G tier logic | `v3/sql/phase_4_v3_tiered_scoring.sql` | ‚¨ú |
| T1G in lead list | `pipeline/sql/January_2026_Lead_List_V3_V4_Hybrid.sql` | ‚¨ú |
| avg_account_size CTE | Both SQL files | ‚¨ú |
| Updated model registry | `v3/models/model_registry_v3.json` | ‚¨ú |
| Updated README | `README.md` | ‚¨ú |
| Updated model report | `v3/VERSION_3_MODEL_REPORT.md` | ‚¨ú |
| Validation logs | `pipeline/logs/EXECUTION_LOG.md` | ‚¨ú |

---

## Expected Impact

| Metric | Before V3.3.2 | After V3.3.2 | Change |
|--------|---------------|--------------|--------|
| Priority Tiers | T1A, T1B, T1, T1F | T1A, T1B, T1, T1F, **T1G** | +1 tier |
| High-Converting Leads | ~310 | ~435 | **+125 leads** |
| New Segment | - | Proactive movers | ‚úÖ Captured |
| Tier 1 Coverage | ~1% of pool | ~1.4% of pool | +40% |

---

*V3.3.2 Implementation Guide - Created January 2026*
